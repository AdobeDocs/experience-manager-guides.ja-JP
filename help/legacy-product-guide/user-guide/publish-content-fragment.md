---
title: コンテンツフラグメントへのトピックのPublish
description: トピックまたはトピック内の要素をAEM GuidesのコンテンツフラグメントにPublishします。  トピックのコンテンツフラグメントを表示して再公開する方法を説明します。
feature: Publishing
role: User
source-git-commit: 76c731c6a0e496b5b1237b9b9fb84adda8fa8a92
workflow-type: tm+mt
source-wordcount: '925'
ht-degree: 1%

---

# コンテンツフラグメントの公開

コンテンツフラグメントは、Adobe Experience Managerの個別のコンテンツです。 コンテンツモデルに基づく構造化コンテンツです。 コンテンツフラグメントは、デザイン情報やレイアウト情報を含まない純粋なコンテンツです。 これらは、Adobe Experience Manager がサポートするチャネルとは独立して作成および管理できます。 コンテンツフラグメントはモジュール型で、コンテンツは小さなコンポーネントに分割されます。

Adobe Experience Manager Guidesでは、トピックまたはトピック内の要素をコンテンツフラグメントに公開できます。 トピックとコンテンツフラグメントモデルの間に JSON ベースのマッピングを作成できます。 このマッピングを使用して、トピックまたはトピック内の要素をコンテンツフラグメントに公開します。 その後、任意のAdobe Experience Manager サイトでコンテンツフラグメントを使用するか、コンテンツフラグメントでサポートされている API を使用して詳細を抽出できます。


コンテンツフラグメントを作成するには、次の手順を実行します。

1. Adobe Experience Manager Assetsで [ コンテンツフラグメントモデル ](https://experienceleague.adobe.com/docs/experience-manager-65/assets/content-fragments/content-fragments-models.html?lang=ja) を作成します。
1. コンテンツフラグメントモデルに基づいて作成するコンテンツフラグメントを保存するフォルダーを作成します。 例えば、「stock-content-fragments」と指定します。
1. フォルダーのプロパティ（「stock-content-fragments」など）を編集して、クラウド設定のコンテンツフラグメントモデルを含むフォルダーのパスを追加します。
例えば、クラウド設定に `/conf/we-retail` を追加します。 この設定により、すべてのコンテンツフラグメントモデルがフォルダーに接続されます。\
   ![ フォルダープロパティにクラウド設定の詳細を追加する ](images/fragment-folder-cloud-configuration.png){width="650" align="left"}
   *フォルダープロパティにクラウド設定を追加し、フラグメントモデルと接続します。*

1. コンテンツフラグメントを生成するには、トピックの **ファイルのプロパティ** にある ![ 出力 **セクションから** 新しい出力 ](./images/Add_icon.svg)**新しい出力アイコン** を選択します。
1. 「**コンテンツフラグメント**」を選択します。\
   ![[ ファイル プロパティ ] の [ オプション ] タブ ](./images/file-properties-outputs-tab.png){width="300" align="left"}

   *トピックのファイルのプロパティから新しいコンテンツフラグメントを追加します*。

1. **コンテンツフラグメントを生成** ダイアログボックスで、次の詳細を入力します。
   ![ フラグメントモデルとマッピングの詳細を、コンテンツフラグメントとしてPublishダイアログに追加 ](images/content-fragment-publish.png){width="500" align="left"}
   *パス、モデル、マッピングの詳細を追加して、トピックまたはその要素をコンテンツフラグメントとして公開します。 既存のコンテンツフラグメントを上書きできます。*

   >[!NOTE]
   >
   >**リポジトリ表示** からコンテンツフラグメントを公開することもできます。 コンテンツフラグメントとして公開するトピックを選択します。 次に、**オプション** メニューから、**Publish As**/**コンテンツフラグメント** を選択します。

   * **パス**：コンテンツフラグメントを公開するフォルダーのパスを参照して選択します。 既存のコンテンツフラグメントを選択すると、マッピングされたフィールドのコンテンツが上書きされます。
   * **タイトル**：コンテンツフラグメントのタイトルを入力します。 デフォルトでは、タイトルにはトピックのタイトルが入力されています。 編集できます。 このタイトルは、コンテンツフラグメントの名前を生成するために使用されます。
   * **名前**：コンテンツフラグメントの名前を入力します。 デフォルトでは、名前にはトピックのタイトルが設定され、スペースは「_」に置き換えられます。 例えば、*sample_content_fragment* と指定します。 編集できます。  この名前は、コンテンツフラグメントの URL の生成に使用されます。
   * **モデル**：コンテンツフラグメントの作成に使用するコンテンツフラグメントモデルを選択します。 モデルは、クラウドサービスで設定したフォルダーから選択されます。
   * **マッピング**：ドロップダウンからマッピングを選択します。 *contentFragmentMapping.json* ファイルからマッピングを選択します。



     管理者は、マッピングを *contentFragmentMapping.json* ファイルに追加できます。 [ トピックとコンテンツフラグメント間のマッピングを作成する ](/help/product-guide/cs-install-guide/conf-content-fragment-mapping-cs.md) 方法について詳しくは、インストールおよび設定ガイドを参照してください。

   * また、様々な条件を選択してコンテンツを公開することもできます。  次のいずれかのオプションを選択します。


      * **なし**：公開された出力に条件を適用しない場合は、このオプションを選択します。
      * **DITAVAL の使用**：出力を生成する DITAVAL ファイルを選択します。このファイルには、特定のコンテンツが含まれます。 参照ダイアログを使用するか、ファイルパスを入力して、DITAVAL ファイルを選択できます。
      * **属性の使用**: DITA トピックで条件属性を定義できます。 次に、条件属性を選択して、関連するコンテンツを公開します。
     >[!NOTE]
     > 
     >条件は、トピックで条件属性が定義されている場合にのみ有効になります。



   * コンテンツフラグメントが既に存在し、上書きする場合は、「**既存のコンテンツを上書き**」を選択します。 このチェックボックスをオンにしていない場合、コンテンツフラグメントが既に存在すると、Experience Manager Guidesにエラーが表示されます。
1. 「**生成**」をクリックして、コンテンツフラグメントを公開します。

1. **ファイルのプロパティ** の「**出力**」セクションで、トピックのコンテンツフラグメントを表示できます。

   ![ トピックのコンテンツフラグメントの表示 ](images/outputs-options-menu.png){width="300" align="left"}

   *トピック用に存在するコンテンツフラグメントを表示し、再公開します*。


コンテンツフラグメントを公開すると、任意のAdobe Experience Manager サイトで使用することもできます。




## コンテンツフラグメントのオプションメニュー

**オプション** メニューから、コンテンツフラグメントに対して次のアクションを実行することもできます。

* **生成**：コンテンツフラグメントを再公開して、DITA トピックの最新のコンテンツで更新します。 出力を再生成する場合、コンテンツフラグメントのパス、名前、タイトル、モデルおよびマッピングは変更できません。 ただし、出力の再生時に別の条件を選択できます。

* **複製**：コンテンツフラグメントを複製します。 パス、名前、タイトル、モデルおよびマッピングを変更できます。 コンテンツフラグメントを複製する際に、別の条件を選択することもできます。

* **削除**：出力リストからコンテンツフラグメントを削除します。 確認プロンプトが表示されます。 確認すると、コンテンツフラグメントが **出力** リストから削除されます。

  >[!NOTE]
  >
  > このアクションによってコンテンツフラグメントから削除されるコンテンツはありません。

* **表示**：コンテンツフラグメントエディターを表示します。 また、変更を加えて保存することもできます。


