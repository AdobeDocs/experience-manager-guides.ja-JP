---
title: カスタム DITA-OT および DITA 特殊化の使用
description: カスタム DITA-OT および DITA 特殊化の使用方法を学ぶ
exl-id: ddc1393b-b269-40e5-9627-96dad82b42e9
feature: DITA-OT Configuration
role: Admin
level: Experienced
source-git-commit: be06612d832785a91a3b2a89b84e0c2438ba30f2
workflow-type: tm+mt
source-wordcount: '2093'
ht-degree: 0%

---

# カスタム DITA-OT および DITA 特殊化の使用 {#id181GAJ0005Z}

DITA Open Toolkit \（DITA-OT\）は、DITA マップとトピックコンテンツの処理を提供する Java ベースのオープンソースツールのセットです。 AEM Guidesでは、カスタム DITA-OT プラグインを簡単にインポートして使用できます。 インポートすると、カスタム DITA-OT プラグインを使用して任意のフォーマットで出力を生成するようにAEM Guidesを設定できます。 出力を生成する際には、単に DITA-OT オプションを選択するだけで、AEM Guidesはカスタム DITA-OT プラグインを使用して必要な出力を生成します。

出力を公開しながら Ant パラメーターを処理する場合は、AEM Guidesを使用すると簡単に行うことができます。 使用する Ant パラメータを指定できます。指定したパラメータがパブリッシュプロセスによって処理されます。

>[!NOTE]
>
> AEM Guidesは DITA-OT バージョン 3.3.2 に付属しています。ただし、AEM Guidesは DITA-OT version 1.7 以降をサポートしています。 DITA-OT バージョンの完全なリストについては、[DITA-OT バージョン ](http://www.dita-ot.org/download) を参照してください。

>[!TIP]
>
> カスタム DITA-OT プラグインの使用に関するベストプラクティスについては、ベストプラクティスガイドの *DITA-OT プロファイル設定* および *カスタム DITA-OT の使用* 節を参照してください。

## カスタム DITA-OT プラグインの使用 {#id181NH1020L7}

カスタム DITA-OT プラグインをパブリッシングに使用する方法は 2 つあります。 1 つ目の方法は、カスタム DITA-OT プラグインをAEM リポジトリにアップロードすることです。 もう 1 つの方法は、カスタム DITA-OT プラグインをサーバーに保存し、プロファイルを作成して、プロファイル内のカスタム DITA-OT プラグインの場所を指定することです。

デフォルトでは、AEM Guidesには、コンテンツの編集と公開に使用するデフォルトテンプレートの設定を含む、事前設定済みのプロファイルが付属しています。 文書やカスタム DITA-OT プラグインを編集してコンテンツを公開するときに使用するカスタムテンプレートを使用して、カスタムプロファイルを作成できます。

AEM Guidesで使用可能なデフォルトの DITA-OT パッケージには、MathML 方程式のレンダリングをサポートしない Apache FOP XSL-FO プロセッサーが付属しています。 コンテンツで MathML 式を使用する場合は、Apache FOP 用の MathML レンダリングエンジンプラグインが組み込まれているか、別の XSL-FO プロセッサーが使用されていることを確認します。

>[!IMPORTANT]
>
> AEM Guidesをバージョン 2.2 から 2.5.1 または 2.6 にアップグレードした場合は、Configuration Manager から加えられたすべての変更が自動的に選択され、デフォルトプロファイルに保存されます。

カスタム DITA-OT プラグインをAEM リポジトリにアップロードするには、次の手順を実行します。

1. AEMにログインし、CRXDE Liteモードを開きます。

1. `DITA-OT.ZIP` ファイルをダウンロードします。

   `DITA-OT.ZIP` ファイルの場所は `/libs/fmdita/dita_resources/DITA-OT.zip` です。

   ![](assets/dita-ot-zip-in-crx.png)

1. サーバーに zip ファイルの内容を解凍します。

1. DITA-OT プラグインインテグレータメカニズムを使用して、カスタム DITA-OT プラグインに新しいバージョンの DITA-OT を統合します。

   >[!NOTE]
   >
   > プラグインの ZIP ファイル内のクラスパスセパレーターは、オペレーティングシステムに依存します。つまり、サーバーが Windows でホストされている場合、クラスパスセパレーターは、Linux で使用されているものとは異なります。 プラグインの手動統合の詳細については、DITA-OT ドキュメントの *プラグインの手動インストール* トピックを参照してください。

1. 同じ名前\（`DITA-OT.ZIP`\）とフォルダー構造を維持したまま、ZIP ファイルを再度作成します。

1. 更新した ZIP ファイルをAEM リポジトリにアップロードして戻します。

   ZIP ファイルをアップロードする前に、次のチェックを行ってください。

   - Mac/Linux OS でインテグレーター\（カスタムプラグインをインストールするには\）を実行して、ファイルセパレーターの問題を回避します。Windows と Linux OS ではファイルセパレーターが異なるので、Mac/Linux OS に統合されたプラグインは、Windows と Linux の両方のセットアップと互換性があります。
   - `DITA-OT.ZIP` ファイルに「DITA-OT」という名前のフォルダが含まれ、関連するすべてのプラグインとファイルが含まれていることを確認します。
   - 作成 `DITA-OT.ZIP` るファイルの mimeType が&quot;nt:file&quot; \（AEMにアップロードされる際の ZIP ファイルのプライマリタイプに対応します\）であることを確認します。 WebDAV ツールまたはコードデプロイメントを使用して、この ZIP ファイルをAEMの目的のパスにアップロードします。 \（この ZIP はAEM コンテンツパッケージではなく、アーカイブファイルのみなので、この ZIP ファイルのデプロイにAEM パッケージマネージャーを使用しないでください。\）
   >[!NOTE]
   >
   > デフォルトの DITA-OT パッケージを上書きしないことをお勧めします。 プラグインを含むカスタム DITA-OT パッケージは、`apps` フォルダーの下の別の場所にアップロードしてください。

1. デフォルトの DITA プロファイルを編集用に開き、\（更新を行わずに\）保存して、変更を有効にします。


次の手順を実行して新しいプロファイルを作成し、サーバーに保存されているカスタム DITA-OT プラグインを使用するように設定します。

1. カスタム DITA-OT プラグインをサーバーに保存します。

   >[!NOTE]
   >
   > カスタム DITA-OT プラグインを保存するフォルダ構造は、`\*<parent-folder\>*\DITA-OT` にしてください。

1. 上部の「Adobe Experience Manager」リンクをクリックし、「**ツール**」を選択します。

1. ツールのリストから **ガイド** を選択します。

1. **DITA Profiles** タイルをクリックします。

   >[!NOTE]
   >
   > デフォルトプロファイル情報は、プロファイル ページに表示されます。 AEM Guidesをバージョン 2.2 から 2.5.1 または 2.6 にアップグレードした場合は、Configuration Manager から加えられたすべての変更が自動的に選択され、デフォルトプロファイルに保存されます。

1. デフォルトプロファイルを編集したり、新しいプロファイルを作成したり、デフォルトプロファイルの設定を複製して新しいプロファイルを作成したりできます。

   >[!NOTE]
   >
   > デフォルトプロファイルは更新できますが、削除することはできません。 ただし、作成した新しいプロファイルはすべて編集したり削除したりできます。

1. カスタム DITA-OT プラグインを使用するには、次のプロパティーを設定します。

   | プロパティ名 | 説明 |
   |-------------|-----------|
   | **プロファイルのプロパティ** |
   | プロファイル名 | このプロファイルに一意の名前を指定します。 |
   | 出力を再利用 | *\（オプション\）* プロファイルが既存のプロファイルに基づいている場合は、このオプションを選択します。 このオプションを選択すると、AEM Guidesは DITA-OT パッケージの内容を再度取り出さず、既存の DITA-OT パッケージを再利用します。 |
   | プロファイル抽出パス | *\（オプション\）* DITA-OT がディスク上に保存されるパスを指定します。 デフォルトでは、AEM Guidesはリポジトリに DITA-OT パッケージをバンドルし、このパスのディスクに抽出されます。<br>**注意** このパスは、既存のシステム変数またはプロパティを使用して定義できます。 詳細は、[DITA-OT 環境変数 ](#id181NH0YN0AX) プロパティの説明を参照してください。 |
   | 割り当てられたパス | \（*オプション*\）このプロファイルを適用するコンテンツリポジトリ内のパスを指定します。 複数の場所を指定できます。 |
   | **DITA-OT プロパティ** |
   | DITA-OT タイムアウト | \（*Optional*\） AEM Guidesが DITA-OT プラグインからのレスポンスを待つ時間を秒単位で指定します。 指定した時間内に応答がない場合、AEM Guidesは公開タスクを終了し、タスクには失敗とフラグが付けられます。 また、失敗ログは、出力生成ログファイルで利用できるようになります。 <br> デフォルト値：300 秒\（5 分\） |
   | DITA-OT PDF引数 | カスタム DITA-OT プラグインがPDF出力を生成するために処理するコマンドライン引数を指定します。 すべてのカスタム DITA-OT プロファイルに対して、次のコマンドライン引数を指定します。`-lib plugins/org.dita.pdf2.fop/lib/` |
   | DITA-OT AEM引数 | \（*Optional*\） AEM Site 出力を生成するためにカスタム DITA-OT プラグインによって処理されるカスタムのコマンドライン引数を指定します。 |
   | DITA-OT ライブラリパス | \（*オプション*\） DITA-OT プラグインの追加ライブラリパスを指定します。 |
   | DITA-OT Build XML | \（*Optional*\） カスタマイズされた DITA-OT プラグインにバンドルされているカスタム Ant ビルドスクリプトのパスを指定します。 このパスは、ファイルシステム上の DITA-OT ディレクトリからの相対パスです。 |
   | DITA-OT Ant スクリプトフォルダ | \（オプション\） DITA-OT Ant スクリプトフォルダのパスを指定します。 このパスは、ファイルシステム上の DITA-OT ディレクトリからの相対パスです。 |
   | DITA-OT 環境変数 | *\（オプション\）* DITA-OT プロセスに渡す環境変数を指定します。 デフォルトでは、AEM Guidesは 4 つの変数（`ANT_OPTS`、`ANT_HOME`、`PATH`、`CLASSPATH`）を追加します。 <br> 既存のシステム環境変数またはプロパティを再利用して、新しい環境変数を作成できます。 例えば、システム内でシステム変数 `JAVA_HOME` 定義しており、`JAVA_HOME` を使用して構築された `JAVA_BIN` という新しい環境変数を定義するとします。 次に、`JAVA_BIN` の定義を <br> のように追加できます。 `JAVA_BIN= ${JAVA_HOME}/bin` <br> **注意** Java システムプロパティを使用して環境変数を作成することもできます。 例えば、AEM start スクリプトで Java システムプロパティ `java.io.tmpdir` を一時ディレクトリに定義する場合、このプロパティを使用して新しい変数を `${java.io.tmpdir}/fmdita/dita_ot` として定義できます。<br> **重要** 既存のシステム変数またはプロパティを再利用するには、`${}` で囲む必要があります。 |
   | DITA-OT 出力を上書き | *\（オプション\）* このオプションを選択すると、ローカルシステムで使用可能な DITA-OT パッケージを指定して、DITA-OT を使用して出力を生成できます。 この構成は、ConfigManager のアクティブ化時に設定されます。 <br> AEM サーバーに保存されている DITA-OT パッケージのパスを指定する場合は、このオプションの選択を解除します。 |
   | AEM DITA-OT Zip Path/ローカル DITA-OT ディレクトリパス | 「DITA-OT 出力を上書き」での選択に応じて、カスタム DITA-OT.zip ファイルが格納されている完全パスを指定します。 これは、AEM リポジトリまたはローカルシステムのパスになります。 |
   | DITA-OT プラグインパス | カスタムプラグインのパス。 このプラグインは、メインの DITA-OT パッケージと自動的に統合されます。 |
   | カタログの統合 | \（*オプション*\） AEM リポジトリ内のカスタム DTD および XSD catalog.xml ファイルのパス。 これは、カタログが DITA-OT パッケージにない場合にのみ指定してください。 これらのカタログは、メインの DITA-OT とプラグインとして自動的に統合されます。 |
   | システム ID カタログの追加 | \（*オプション*\）このオプションは、カタログにパブリック ID エントリがない場合、または DITA ファイルでアップロード元のサーバーパスに対する相対システム ID のみを使用する場合にのみ選択します。 |
   | DITA-OT 一時パス | *\（オプション\）* DITA ファイルをコピーして処理する一時的な場所を指定します。 DITA-OT がファイルを処理する前に、ファイルはこの一時的な場所にコピーされます。 デフォルトでは、一時ストレージの場所は <br> です。 **注意** このパスは、既存のシステム変数またはプロパティを使用して定義できます。 詳細は、[DITA-OT 環境変数 ](#id181NH0YN0AX) プロパティの説明を参照してください。 |

   >[!NOTE]
   >
   >  AEM Guides インストーラは 2 つの環境変数を作成します。これらの環境変数を使用して、カスタム DITA-OT プラグインファイルのパスを指定できます。 これらの環境変数は、ファイルシステム上の DITA-OT ディレクトリのパスを格納する DITAOT\_DIR と、ファイルシステム上で DITA マップの内容を抽出するパスを格納する DITAMAP\_DIR です。

1. 「**完了**」をクリックして、プロファイルを保存します。


>[!NOTE]
>
> カスタム DITA プロファイルをパッケージとしてエクスポートし、他のAEM Guides インスタンスにアップロードすることで、時間を節約できます。 詳しくは、[ 付録 ](appendix.md) を参照してください。

## DITA 特殊化の統合 {#id211MB0E00XA}

DITA の特殊化は、新しいエレメントを追加するか、既存のエレメントを削除して、新しい DITA 構造を作成するプロセスです。 新しい DITA エレメントを作成するには、既存の DITA エレメントをベースとして作成し、オーサリング要件に従って修正します。 基本的に、DITA の特殊化により、既存の DITA アーキテクチャの利点を維持しながら、ビジネス要件を満たすカスタマイズされた情報モデルを作成できます。

プロファイル機能を使用して、カスタムの DITA 特殊化設定を保存できます。 これらの設定は、カスタム DITA コンテンツのオーサリングおよび公開時に使用できます。 AEM Guidesでは、カスタム DTD/XSD でパブリック ID とシステム ID を使用できます。

>[!NOTE]
>
> AEM Guides Web Editor は XSD をサポートしていません。

次の手順を実行して新しいプロファイルを作成し、専用の DTD および XSD AEM Guidesを使用するように設定します。

1. 専用の DTD と XSD を含むローカルマシン上に専用フォルダを作成します。

1. 特殊化フォルダにも含める必要がある `catalog.xml` ファイルの DTD 詳細を指定します。

   >[!NOTE]
   >
   > DITA 1.3 の場合、AEM リポジトリ内の DTD `catalog.xml` ファイルのデフォルトの場所は `/libs/fmdita/dita_resources/DITA-1.3/dtd/catalog.xml` です。

1. 専門フォルダーにも含める必要がある `catalog.xml` ファイルの XSD の詳細を指定します。

   >[!NOTE]
   >
   > DITA 1.3 の場合、AEM リポジトリ内の XSD catalog.xml ファイルのデフォルトの場所は `/libs/fmdita/dita_resources/DITA-1.3/xsd/catalog.xml` です。

1. フォルダーを次の場所にアップロードします。

   `/apps/fmdita/dita_resources`

1. 上部の「Adobe Experience Manager」リンクをクリックし、「**ツール**」を選択します。

1. ツールのリストから **ガイド** を選択します。

1. **DITA Profiles** タイルをクリックします。

   >[!NOTE]
   >
   > デフォルトプロファイル情報は、プロファイル ページに表示されます。 AEM Guidesをバージョン 2.2 から 2.5.1 または 2.6 にアップグレードした場合は、Configuration Manager から加えられたすべての変更が自動的に選択され、デフォルトプロファイルに保存されます。

1. デフォルトプロファイルを編集したり、新しいプロファイルを作成したり、デフォルトプロファイルの設定を複製して新しいプロファイルを作成したりできます。

   >[!NOTE]
   >
   > デフォルトプロファイルは削除できません。 ただし、作成した新しいプロファイルはすべて編集したり削除したりできます。

1. **Schema** \> **Catalog** 設定で、AEM リポジトリ内のカスタム DTD および XSD `catalog.xml` ファイルのパスを指定します。

1. 「**システム ID カタログを追加**」オプションを選択します。

   >[!NOTE]
   >
   > カタログにパブリック ID エントリがない場合、または DITA ファイルがアップロード元のローカルファイルパスに関連するシステム ID のみを使用する場合にのみ、このオプションを選択します。

   「プロファイル」ページのその他のプロパティーについては、「[ カスタム DITA-OT プラグインの使用 ](#id181NH1020L7)」節の [ 手順 6](#id17A9F0D075Z) のプロパティー表を参照してください。

1. 「**完了**」をクリックして、プロファイルを保存します。


>[!NOTE]
>
> カスタム DITA プロファイルをパッケージとしてエクスポートし、他のAEM Guides インスタンスにアップロードすることで、時間を節約できます。 詳しくは、「[Appendix.md](appendix.md)」を参照してください。
