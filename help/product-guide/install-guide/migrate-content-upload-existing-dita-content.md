---
title: 既存の DITA コンテンツのアップロード
description: 既存の DITA コンテンツをアップロードする方法を学ぶ
exl-id: 1dde8a29-301f-461e-b598-2a8cab61bf3d
feature: Migration
role: Admin
level: Experienced
source-git-commit: 0513ecac38840a4cc649758bd1180edff1f8aed1
workflow-type: tm+mt
source-wordcount: '1201'
ht-degree: 0%

---

# 既存の DITA コンテンツのアップロード {#id176FF000JUI}

ほとんどの場合、AEM Guidesで使用する既存の DITA コンテンツのリポジトリがあります。 このような既存のコンテンツの場合は、次のいずれかの方法を使用して、コンテンツをAEM リポジトリに一括アップロードできます。

## WebDAV ツールの使用

他の DITA エディタでトピックとマップを作成する場合は、任意の WebDAV ツールを使用してファイルをアップロードできます。 この節で説明する手順では、WinSCP を WebDAV ツールとして使用して、コンテンツをアップロードします。

WinSCP を使用してファイルをアップロードするには、次の手順を実行します。

1. コンピュータに WinSCP をダウンロードしてインストールします。

1. WinSCP アプリを起動します。

   ログイン ダイアログが表示されます。

1. ログインダイアログで、「**ファイルプロトコル**」として「WebDAV」を選択し、次のような他の接続の詳細を指定して、「新しいサイト」設定を指定します。

   - AEM サーバーがホストされている URL。

   - ポート番号\（デフォルトは 4502\）

   - AEM サーバーにアクセスするためのユーザー名とパスワード。

1. 「**ログイン**」をクリックします。

   接続に成功すると、AEM Assetsの内容が WinSCP ユーザーインターフェイスに表示されます。 WinSCP ファイルエクスプローラーを使用して、コンテンツを簡単に参照、作成、更新、または削除できます。


## FrameMakerを使用

Adobe FrameMakerには強力なAEM コネクタが付属しており、既存の DITA やその他のFrameMaker文書\（.book and .fm\）をAEMに簡単にアップロードできます。 単一ファイルのアップロード、依存関係の有無を問わず完全なフォルダーのアップロード\（コンテンツ参照、相互参照、グラフィックなど\）など、様々なファイルアップロード機能を使用できます。

FrameMakerのAEM コネクタを使用してコンテンツをアップロードするには、次の手順を実行します。

1. FrameMakerを起動します。

1. **接続マネージャー** ダイアログを開きます。

   ![](assets/fm-aem-connector.png){width="550" align="left"}

1. 次の詳細を入力して、AEM リポジトリに接続します。

   - **名前**:AEM サーバーへの接続を識別するわかりやすい名前を入力します。
   - **サーバー**:AEM サーバーの URL とポート番号を入力します。

   - **ユーザー名**/**パスワード**:AEM サーバーにアクセスするためのユーザー名とパスワードを入力します。

1. **接続** をクリックします。

   接続が正常に確立されると、AEM リポジトリのAssetsがリポジトリマネージャーウィンドウに表示されます。

   ![](assets/fm-repo-manager.png){width="550" align="left"}

   任意のファイルまたはフォルダを右クリックすると、関連する操作を実行できます。 例えば、フォルダーを右クリックすると、ファイルのアップロード、依存関係を含んだファイルのアップロード、フォルダー全体のアップロードなどを行うオプションが表示されます。


## UUID ファイル名パターンの設定

コンテンツを読み込む場合、ファイル名が UUID に基づいている必要はありません。 UUID ベースのファイル名を使用するシステムでは、元のファイル名ではなく、すべてのファイルを UUID を使用して参照する必要があります。 読み込んだファイルが UUID ベースのファイル名を持たない場合は、そのファイルプロパティに UUID を追加するようにシステムを設定できます。 次に、この UUID は、そのようなファイルを参照するために使用されます。UUID は、ファイルの命名には使用されません。

次の手順を実行して、ファイル名を UUID パターンと照合し、UUID が割り当てられていないファイルに UUID を割り当てます。

1. Adobe Experience Manager Web コンソール設定ページを開きます。

   設定ページにアクセスするためのデフォルトの URL は次のとおりです。

   ```http
   http://<server name>:<port>/system/console/configMgr
   ```

1. *com.adobe.fmdita.config.ConfigManager* バンドルを検索してクリックします。

1. 「**UUID のファイル名パターン**」プロパティで、読み込んだファイルの名前を確認するパターンを指定します。

   ファイルが指定されたパターンに従わない場合、UUID がファイルのプロパティに追加され、ファイルへのすべての参照が、ファイルに割り当てられた UUID で更新されます。

1. 「**保存**」をクリックします。


## WebDav ツールを使用して UUID のコンテンツをアップロードします {#id201MI0I04Y4}

UUID を持つコンテンツをアップロードするには、次のいずれかの方法を使用できます。

- ローカルシステムからコンテンツをドラッグ&amp;ドロップします。
- AEM Assets UI から **作成** \> **ファイル** ワークフローを使用します。
- WinSCP などのツールを使用します。

WinSCP などのツールを使用する場合は、configMgr の **同じ UUID を持つ古いファイルを新しいフォルダーに移動する** オプションを設定することで、重複したファイルに対して実行するアクションを定義できます。 AEM リポジトリ内のその他の場所にあるファイルに対して実行されるアクションを定義します。 この設定は、configMgr の *com.adobe.fmdita.config.ConfigManager* バンドルで使用できます。

デフォルトでは、「**同じ UUID を持つ古いファイルを新しいフォルダーに移動** オプションはオンになっています。 つまり、アップロード中のファイルがリポジトリ内の他のフォルダーに存在する場合、既存のファイルは現在の場所に移動され、アップロード中のファイルで上書きされます。 このオプションを選択しない場合、ファイルは既存の場所で上書きされます。

**UUID ベースのファイルの操作に関するその他の注意事項**:

AEM リポジトリー内のコンテンツの移動またはコピーをおこなう際は、次の点を考慮する必要があります。

- 1 つ以上のファイルをある場所から別の場所にコピーする場合、UUID を持たないファイルに対して新しい UUID が生成されます。 この UUID はファイルのメタデータに追加されます。

- ファイルに競合があるか、重複がある場合は、コピーまたは移動する新しいファイルに対して一意のファイル名が生成されます。

- 2 つのファイルが同じ UUID を持つことはできません。 一意の UUID がすべての新しいファイルに割り当てられます。


ローカルシステムからAEM リポジトリにコンテンツを移動またはコピーする際は、次の点を考慮する必要があります。

- 2 人の異なるユーザーが同時にファイルをアップロードした場合、後で処理されるファイルが以前のファイルを上書きします。 しかし、このような行為はまれであるため、避けるべきである。

- AEM リポジトリからコンテンツをチェックアウトし、ローカルシステムで変更を行う場合は、ファイルをアップロードするときにファイル名が変更されていないことを確認してください。


## curl コマンドの使用

また、curl コマンドを使用して、DAM へのフォルダーの作成、ファイルのアップロード、アップロードされたコンテンツへのメタデータの追加を行うこともできます。

**フォルダーの作成**

次のコマンドを実行して、AEM リポジトリにフォルダーを作成します。

```curl
curl --user <username>:<password> --data jcr:primaryType=sling:Folder "<server folder path>"
```

フォルダーを作成するには、次のパラメーターを指定します。

- `<username>:<passowrd>`:AEM リポジトリにアクセスするためのユーザー名とパスワードを指定します。 このユーザーには、フォルダー作成権限が必要です。

- `jcr:primaryType=sling:Folder`：このパラメーター *そのまま* を指定して、フォルダータイプのリソースを作成します。

- `<server folder path>`:AEM リポジトリに作成する新しいフォルダーの名前を含む、完全なフォルダーパス。 例えば、パスを `http://192.168.1.1:4502/content/dam/projects/AEM-Guides` として指定した場合、フォルダー `AEM-Guides` は DAM の `projects` フォルダー内に作成されます。


**ファイルのアップロード**

次のコマンドを実行して、AEM リポジトリにファイルをアップロードします。

```curl
curl --user <username>:<password> -T "<local file path>" "<server folder path>"
```

次のパラメーターを指定して、ファイルをアップロードします。

- `<username>:<passowrd>`:AEM リポジトリにアクセスするためのユーザー名とパスワードを指定します。 このユーザーには、`server folder path` に対する書き込み権限が必要です。

- ``local file path``：アップロードするローカルシステム上の完全ファイルパス。

- `<server folder path>`：ファイルをアップロードするAEM サーバー上のフォルダーパスを入力します。


**メタデータを追加**

次のコマンドを実行して、ファイルにメタデータを追加します。

```curl
curl --user <username>:<password> -F<attribute name>=<value> <metadata node path>
```

メタデータ情報を追加するには、次のパラメーターを指定します。

- `<username>:<passowrd>`:AEM リポジトリにアクセスするためのユーザー名とパスワードを指定します。 このユーザーには、``metadata node path`` に対する書き込み権限が必要です。

- ``-F<attribute name>=<value>``: `<attribute name>` は、`audience` などのメタデータ属性の名前で、`<value>` は `internal` にすることができます。 複数の属性の名前と値のペアをスペースで区切って指定できます。

- `<metadata node path>`：ファイル名とそのメタデータノードを含む完全なフォルダーパス。 例えば、パスに `http://192.168.1.1:4502/content/dam/projects/AEM-Guides/intro.xml/jcr:content/metadata` を指定した場合、指定したメタデータ情報がファイルに設定 `intro.xml` れます。


**親トピック：**&#x200B;[ 既存のコンテンツを移行 ](migrate-content.md)
