---
title: カスタム DITA-OT および DITA 特殊化の使用
description: カスタム DITA-OT および DITA 特殊化の使用方法を説明します。
exl-id: 4d3e0fc1-b684-44f9-ab0d-411033024019
source-git-commit: 5e0584f1bf0216b8b00f00b9fe46fa682c244e08
workflow-type: tm+mt
source-wordcount: '1697'
ht-degree: 0%

---

# カスタム DITA-OT および DITA 特殊化の使用 {#id181GAJ0005Z}

DITA Open Toolkit \(DITA-OT\) は、DITA マップとトピックコンテンツの処理を提供する、Java ベースのオープンソースツールのセットです。 AEMガイドを使用すると、カスタム DITA-OT プラグインを簡単に読み込んで使用できます。 読み込んだAEMガイドは、カスタム DITA-OT プラグインを使用して任意の形式の出力を生成するように設定できます。 出力の生成時に、「DITA-OT」オプションを選択するだけで、AEMガイドはカスタム DITA-OT プラグインを使用して必要な出力を生成します。

出力の公開中に Ant パラメータを処理する場合は、AEMガイドを使用すると簡単に行うことができます。 使用する Ant パラメータを指定し、同じパラメータをパブリッシュプロセスで処理できます。

>[!NOTE]
>
> AEMガイドは、DITA-OT バージョン 3.3.2 に付属しています。ただし、AEMガイドは DITA-OT バージョン 1.7 以降をサポートしています。 DITA-OT バージョンの完全なリストについては、 [DITA-OT バージョン](http://www.dita-ot.org/download).

>[!TIP]
>
> 詳しくは、 *DITA-OT プロファイル設定* および *カスタム DITA-OT の使用*&#x200B;カスタム DITA-OT プラグインの使用に関するベストプラクティスに関するベストプラクティスガイドの節を参照してください。

## カスタム DITA-OT プラグインの使用 {#id181NH1020L7}

カスタム DITA-OT プラグインをAEMリポジトリにアップロードして、公開にカスタム DITA-OT プラグインを使用できます。 デフォルトでは、AEMガイドには、コンテンツの編集と公開に使用するデフォルトテンプレートの設定を含む、事前設定済みのプロファイルが付属しています。 カスタムテンプレートを使用してカスタムプロファイルを作成し、ドキュメントの編集時に使用し、カスタム DITA-OT プラグインを使用してコンテンツを公開できます。

AEMガイドで利用できるデフォルトの DITA-OT パッケージには、MathML 式のレンダリングをサポートしていない Apache FOP XSL-FO プロセッサが付属しています。 コンテンツに MathML 式を使用する場合は、Apache FOP 用の MathML レンダリングエンジンプラグインを統合しているか、別の XSL-FO プロセッサを使用していることを確認します。

次の手順を実行して、カスタム DITA-OT プラグインをAEMリポジトリにアップロードします。

1. 「ようこそ」の電子メールで共有されたリンクから DITA-OT.zip ファイルをダウンロードします。

1. zip ファイルの内容をシステム上に展開します。

1. DITA-OT プラグインインテグレータメカニズムを使用して、新しいバージョンの DITA-OT をカスタム DITA-OT プラグインと統合します。

1. 同じ名前を保持した ZIP ファイルを再度作成\(`DITA-OT.ZIP`\) およびフォルダー構造。

1. 更新した ZIP ファイルをAEMリポジトリにアップロードし直します。

   ZIP ファイルをアップロードする前に、次のチェックボックスをオンにします。

   - Mac/Linux OS にインテグレーター\（カスタムプラグインをインストールするには\）を実行して、ファイルの区切り文字に関する問題を回避します。Windows と Linux OS はファイルの区切り文字が異なるので、Mac/Linux OS に統合されたプラグインは Windows と Linux の両方と互換性があります。
   - 次の点を確認します。 `DITA-OT.ZIP` ファイルには「DITA-OT」という名前のフォルダが含まれ、このフォルダにはすべての関連するプラグインとファイルが含まれています。
   - 確認する `DITA-OT.ZIP` 作成するファイルの mimeType は「nt:file」です。\( これは、AEMにアップロードする際の ZIP ファイルの主なタイプに対応します。) WebDAV ツールまたはコードのデプロイメントを使用して、この ZIP ファイルをAEM内の目的のパスにアップロードします。 \( この ZIP はAEMコンテンツパッケージではなく、アーカイブファイルなので、AEMパッケージマネージャーを使用してこの ZIP ファイルをデプロイしないでください。\)

   >[!NOTE]
   >
   > デフォルトの DITA-OT パッケージを上書きしないことをお勧めします。 プラグイン/var/dxml/dita\_resources/dita-ot フォルダーを含むカスタム DITA-OT パッケージをアップロードする必要があります。 Cloud Manager パイプラインを使用して実行することもできます。詳しくは、 [AEMへのデプロイ (as a Cloud Service)](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/implementing/deploying/overview.html?lang=ja) 詳しくは、 AEMドキュメントを参照してください。

1. 「デフォルトプロファイル」の編集、新しいプロファイルの作成、または「デフォルトプロファイル」から設定の複製を選択して、新しいプロファイルを作成できます。

   >[!NOTE]
   >
   > Default プロファイルは更新できますが、削除することはできません。 ただし、作成したすべての新しいプロファイルは、編集および削除できます。

1. カスタム DITA-OT プラグインを使用するには、次のプロパティを設定します。

   | プロパティ名 | 説明 |
   |-------------|-----------|
   | **プロファイルのプロパティ** |
   | プロファイル名 | このプロファイルの一意の名前を指定します。 |
   | 出力を再利用 | *\（オプション\）* プロファイルが既存のプロファイルに基づいている場合は、このオプションを選択します。 このオプションを選択すると、AEMガイドは DITA-OT パッケージの内容を再度抽出せず、既存の DITA-OT パッケージを再利用します。 |
   | プロファイル抽出パス | *\（オプション\）* DITA-OT がディスク上に保持されるパスを指定します。 デフォルトでは、AEM Guides はリポジトリに DITA-OT パッケージをバンドルし、このパスのディスクに抽出されます。 <br> **注意** このパスは、既存のシステム変数またはプロパティを使用して定義できます。 詳しくは、 [DITA-OT 環境変数](#id181NH0YN0AX) プロパティを参照してください。 |
   | 割り当てられたパス | \(*オプション*\) このプロファイルを適用できるコンテンツリポジトリ内のパスを指定します。 複数の場所を指定できます。 |
   | **DITA-OT プロパティ** |
   | DITA-OT タイムアウト | \(*オプション*\) AEMガイドが DITA-OT プラグインからの応答を待機する時間（秒）を指定します。 指定された時間内に受け取った応答がない場合、AEM Guides は公開タスクを終了し、タスクに失敗というフラグを設定します。 また、失敗ログは、出力生成ログファイルで使用可能になります。 <br> デフォルト値：300 秒\（5 分\） |
   | DITA-OTPDF引数 | カスタム DITA-OT プラグインで処理され、PDF出力を生成するコマンドライン引数を指定します。 すべてのカスタム DITA-OT プロファイルに対して、次のコマンドライン引数を指定します。`-lib plugins/org.dita.pdf2.fop/lib/` |
   | DITA-OT AEM引数 | \(*オプション*\) AEM Site 出力を生成するためのカスタム DITA-OT プラグインで処理されるカスタムコマンドライン引数を指定します。 |
   | DITA-OT ライブラリパス | \(*オプション*\) DITA-OT プラグインの追加のライブラリパスを指定します。 |
   | DITA-OT ビルド XML | \(*オプション*\) カスタマイズされた DITA-OT プラグインにバンドルされているカスタム Ant ビルドスクリプトのパスを指定します。 このパスは、ファイルシステム上の DITA-OT ディレクトリに対する相対パスです。 |
   | DITA-OT Ant スクリプトフォルダ | \（オプション\） DITA-OT Ant スクリプトフォルダのパスを指定します。 このパスは、ファイルシステム上の DITA-OT ディレクトリに対する相対パスです。 |
   | DITA-OT 環境変数 | *\（オプション\）* DITA-OT プロセスに渡す環境変数を指定します。 デフォルトでは、AEMガイドは 4 つの変数を追加します。 `ANT_OPTS`, `ANT_HOME`, `PATH`、および `CLASSPATH`. <br> 新しい環境変数を作成するために、既存のシステム環境変数またはプロパティを再利用できます。 例えば、 `JAVA_HOME` システムで定義され、と呼ばれる新しい環境変数を定義するシステム変数 `JAVA_BIN` は、 `JAVA_HOME`. 次に、 `JAVA_BIN` 形式：`JAVA_BIN= ${JAVA_HOME}/bin` <br> **注意：** また、Java システムプロパティを使用して環境変数を作成することもできます。 例えば、AEMの開始スクリプトで Java システムプロパティが定義されている場合、 `java.io.tmpdir` を一時ディレクトリに追加する場合、このプロパティを使用して新しい変数を次のように定義できます。 `${java.io.tmpdir}/fmdita/dita_ot`. <br> **重要：** 既存のシステム変数またはプロパティを再利用するには、内で囲む必要があります。 `${}`. |
   | DITA-OT 出力を上書き | DITA-OT 出力を上書きするかどうかを選択します。 このオプションは選択したままにします。 |
   | AEM DITA-OT Zip Path | カスタム DITA-OT.zip ファイルがAEMリポジトリに格納される完全パスを指定します。 |
   | DITA-OT プラグインのパス | カスタムプラグインのパス。 このプラグインは、メインの DITA-OT パッケージに自動的に統合されます。 |
   | カタログの統合 | \(*オプション*\) AEMリポジトリ内のカスタム DTD および XSD catalog.xml ファイルのパス。 これは、カタログが DITA-OT パッケージにない場合にのみ指定する必要があります。 これらのカタログは、プラグインとしてメインの DITA-OT と自動的に統合されます。 |
   | システム ID カタログを追加 | \(*オプション*\) このオプションは、カタログに公開 ID エントリがない場合、または DITA ファイルがアップロード元のサーバーパスに対する相対的なシステム ID のみを使用する場合にのみ選択します。 |
   | DITA-OT 一時パス | DITA ファイルが処理用にコピーされる一時的な場所。 DITA-OT がファイルを処理する前に、ファイルはこの一時的な場所にコピーされます。 デフォルトでは、一時ストレージの場所は次のようになります。 <br> `<*AEM-Install*>/crx-quickstart/profiles/ditamaps` <br> **重要：** デフォルトのパスは変更しないでください。 |

   >[!NOTE]
   >
   > AEM Guides インストーラーは、カスタム DITA-OT プラグインファイルのパスを指定するために使用できる 2 つの環境変数を作成します。 次の環境変数があります。 `DITAOT\_DIR`：ファイルシステム上の DITA-OT ディレクトリのパスを含む。 `DITAMAP\_DIR`：ファイルシステム上で DITA マップコンテンツが抽出されるパスを含みます。

1. クリック **完了** をクリックしてプロファイルを保存します。


## DITA 特殊化の統合 {#id211MB0E00XA}

DITA 特殊化とは、新しい要素を追加または既存の要素を削除して、新しい DITA 構造を作成するプロセスです。 新しい DITA 要素を作成するには、既存の DITA 要素を基本として取得し、オーサリング要件に従って変更します。 基本的に、DITA 専門化により、既存の DITA アーキテクチャのメリットを維持しながら、ビジネス要件を満たすカスタマイズされた情報モデルを作成できます。

プロファイル機能を使用して、カスタム DITA 特殊化設定を保存できます。 これらの設定は、カスタム DITA コンテンツの作成および公開時に使用できます。 AEMガイドを使用すると、カスタム DTD/XSD でパブリック ID とシステム ID を使用できます。

>[!NOTE]
>
> AEM Guides Web Editor は XSD をサポートしていません。

次の手順を実行して、新しいプロファイルを作成し、AEMガイドで特殊な DTD と XSD を使用するように設定します。

1. 専用の DTD と XSD を含む専用フォルダをローカルマシン上に作成します。

1. DTD の詳細を `catalog.xml` 特殊化フォルダーにも含める必要があるファイル。

   >[!NOTE]
   >
   > DITA 1.3 の場合、DTD のデフォルトの場所 `catalog.xml` AEMリポジトリ内のファイルは次のとおりです。 `/libs/fmdita/dita_resources/DITA-1.3/dtd/catalog.xml`.

1. XSD の詳細を `catalog.xml` 特殊化フォルダーにも含める必要があるファイル。

   >[!NOTE]
   >
   > DITA 1.3 の場合、AEMリポジトリ内の XSD catalog.xml ファイルのデフォルトの場所は次のようになります。 `/libs/fmdita/dita_resources/DITA-1.3/xsd/catalog.xml`.

1. フォルダーを次の場所にアップロードします。

   `/var/dxml/dita_resources`

1. 上部の「 Adobe Experience Manager 」リンクをクリックし、「 」を選択します。 **ツール**.

1. 選択 **ガイド**&#x200B;を選択します。

1. をクリックします。**DITA プロファイル** タイル。

1. 「デフォルトプロファイル」の編集、新しいプロファイルの作成、または「デフォルトプロファイル」から設定の複製を選択して、新しいプロファイルを作成できます。

   >[!NOTE]
   >
   > デフォルトのプロファイルは削除できません。 ただし、作成したすべての新しいプロファイルは、編集および削除できます。

1. Adobe Analytics の **スキーマ** \> **カタログ** 設定、カスタム DTD と XSD のパスを指定 `catalog.xml` ファイルをAEMリポジトリに保存します。

1. を選択します。 **システム ID カタログを追加** オプション。

   >[!NOTE]
   >
   > このオプションは、カタログに公開 ID エントリが見つからない場合、または DITA ファイルがアップロード元のローカルファイルパスに対する相対的なシステム ID のみを使用する場合にのみ選択します。

   プロファイルページの他のプロパティについて詳しくは、 [手順 6](#id17A9F0D075Z) の [カスタム DITA-OT プラグインの使用](#id181NH1020L7) 」セクションに入力します。

1. クリック **完了** をクリックしてプロファイルを保存します。
