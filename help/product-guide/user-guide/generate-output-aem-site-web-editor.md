---
title: AEM Sites
description: Web エディタでAEM Sites プリセットを作成して設定し、DITA マップ、選択したトピック、およびリンクされたトピックのAEM Sites出力を生成します。
feature: Publishing
role: User
source-git-commit: e428c6c031e1167c7c9f2f99bb8fcdbcbaa8a4de
workflow-type: tm+mt
source-wordcount: '2732'
ht-degree: 0%

---


# Web エディターでのAEM Sites プリセット


AEM Sites プリセットは、web エディターから作成して、AEM Sites出力を生成するように設定できます。 AEM Sitesの出力は、複合コンポーネントのマッピングと `guides-components` に基づいているので、効率的なコンテンツの作成と管理が容易になります。

Experience Manager Guidesには、AEM Sitesを作成するための事前定義済みのテンプレートが用意されています。 これらのプリセットにより、コンテンツのレイアウトと構造の一貫性を確保できます。
- これらの定義済みテンプレートに基づいて ](../cs-install-guide/download-install-aem-sites-templates-cs.md#create-a-home-page-using-the-template) ホームページを作成 [ します。
- 必要に応じて、[ トピックテンプレートを編集 ](../cs-install-guide/download-install-aem-sites-templates-cs.md#package-installation) し、スタイルを適用できます。
- また、[ 既存のAEM Sites テンプレートをカスタマイズする ](../cs-install-guide/download-install-aem-sites-templates-cs.md#customize-existing-aem-sites-templates) こともできます。



## AEM Sites プリセットの作成

次の手順を実行して、web エディターからAEM Sites プリセットを作成します。

1. リポジトリパネルで、マップビューで DITA マップファイルを開きます。
1. 「**出力**」タブで、「+」アイコンを選択して出力プリセットを作成します。
1. **新規出力プリセット** ダイアログボックスの **タイプ** ドロップダウンから **** AEM Sites} を選択します。
1. **新しい出力プリセット** ダイアログボックスで **従来のコンポーネントマッピングを使用** オプションの選択を解除します。

![ 新しい ](images/new-aem-sites-dialog-box.png)





>[!NOTE]
>
>管理者は、Experience Manager Guides用にAEM Sites プリセットを設定する前に、テンプレートを使用してAEM Sites構造を作成する必要があります。
- **オンプレミスソフトウェア**：オンプレミスソフトウェアの [AEM Sites テンプレートをダウンロードしてインストール ](../install-guide/download-install-aem-sites-templates.md) する方法の詳細を説明します。
- **Cloud Service**:Cloud Service用にAEM Sites テンプレートを [ ダウンロードしてインストール ](../cs-install-guide/download-install-aem-sites-templates-cs.md) する方法について説明します。




### 現在のフォルダープロファイルにプリセットを追加する

Experience Manager Guidesの管理者は、グローバルプロファイルとフォルダープロファイルの出力プリセットを作成および管理できます。 **新しい出力プリセット** ダイアログボックスで **現在のフォルダープロファイルに追加** オプションを選択して、現在のフォルダープロファイルの出力プリセットを作成します。 ![ フォルダープロファイルアイコン ](images/global-preset-icon.svg) アイコンは、フォルダープロファイルレベルのプリセットを示します。  詳しくは、[ グローバルプロファイルおよびフォルダープロファイル出力プリセットの管理 ](./web-editor-manage-output-presets.md) を参照してください。

### 従来のコンポーネントマッピングに基づくAEM Sites プリセット

従来のコンポーネントマッピングを使用してAEM Sites プリセットを作成することもできます。 従来のコンポーネントマッピングに基づいてAEM Sites プリセットを作成するには、「**新しい出力プリセット** ダイアログボックスから **従来のコンポーネントマッピングを使用** オプションを選択します。

一部のオプションは、従来のコンポーネントマッピングを使用するプリセットとは異なる場合があります。



## AEM Sites プリセットの設定

設定は、「**一般**」、「**コンテンツ**」、「**トピックリスト**」、「**クロスマップ参照** の各タブに整理されています。

![aem sites プリセット設定 ](images/aem-sites-new-config.png)
**一般**

**一般** タブには、出力の生成に関連する次の設定が含まれています。

- サイトパスを使用
- サイトパス
- サイト
- Publishパス
- トピックページテンプレート
- に基づいてページ名を生成
   - トピック ファイル名
   - トピック タイトル
- 以前に生成したページのクリーンアップ
   - マップから削除されたトピックについて、以前に生成したページを削除します
   - このパスで他のソースが作成したすべてのページを削除：
- 生成後のワークフロー



**コンテンツ**

「**コンテンツ**」タブには、次の設定が含まれます。

- ベースラインの使用
- 条件フィルター
- 追加の DITA-OT コマンドライン引数
- メタデータ
   - ファイル（Assets）のプロパティ
   - フォールバックとしてのマップ プロパティの使用


詳しくは、[AEM Sites設定 ](#aem_sites_config) を参照してください。

**トピック リスト**

**トピックリスト** には、DITA マップの現在の作業コピーに存在するトピックのリストが表示されます。 デフォルトでは、すべてのトピックが含まれています。 特定のトピックを選択し、そのトピックに対してのみAEM Sites出力を生成できます。 たとえば、一部のトピックを更新した場合、DITA マップ全体を公開するのではなく、それらのトピックのみを公開できます。

**トピックリスト** タブは、従来のマッピングに基づいて作成されていないAEM プリセットに存在します。

**クロスマップ参照**
このリストには、`scope =”peer”` を使用したクロスマップ参照を含むトピックが含まれています。 他の DITA マップで使用可能なトピックに `scope=”peer”` して、クロスマップ参照のリストの公開コンテキストを指定できます。 このタブは、Experience Manager Guides（UUID）版を使用している場合に表示されます。



詳しくは、リンクされたトピックの公開方法 [ を参照し ](#publish-linked-topics) ください。





## AEM Sites設定 {#aem_sites_config}

AEM Sites出力には、次のオプションを使用できます。

| AEM Sitesオプション | 説明 |
| --- | --- |
| サイトパスを使用 | コンテンツをExperience Managerサイトに公開するには、このオプションを使用します。 出力を公開するサイトの正確なパスがわかっている場合は、このオプションを選択します。 また、「サイトパス」フィールドでフルパスを指定します。 |
| サイトパス | このオプションは、「**サイトパスを使用**」オプションを選択した場合に表示されます。 出力を公開するExperience Managerサイトの正確なパスを参照します。 |
| サイト | コンテンツの公開先Experience Manager Sitesの名前。 ドロップダウンのオプションは、AEM Sitesで使用可能なサイトのリストに基づいて入力されます。 <br> 「**更新** ![ 更新 ](images/navtitle-refresh-icon.svg)」アイコンを選択して、オプションの新しいリストを取得し、更新されたデータを反映します。 |
| Publishのパス | 出力が保存されるAEM リポジトリ内のパス。 Publishパスには、ホームページテンプレートに基づいて作成されたページを含むすべてのパスが入力されます。 DITA マップのAEM Sites出力はこのパスの下に生成されます。  例えば、サイトを `AEMG-Docs`、Publish パスを `aemg-docs-en/docs/product-abc.` に指定すると、AEM Sitesの出力は `crx/de` の `aemg-docs-en/docs/product-abc/` ノードの下に生成されます。 |
| トピックページテンプレート | コンテンツを複数のドキュメントに一貫して整理するために使用できる構造コンポーネント。 これらのテンプレートは、Adobe Experience Manager サイト テンプレートで事前に定義されています。 オプションには、選択したサイトで使用可能なすべてのトピックページテンプレートが設定されます。 すべての出力トピックに適用するテンプレートを選択します。 |
| に基づいてページ名を生成 | **トピック ファイル名**: DITA トピックのファイル名を使用してサイト URL を作成します。<br> **トピックタイトル**: DITA トピックのタイトルを使用して、Experience Managerサイト名を作成します。 |
| 以前に生成したページのクリーンアップ | - **マップから削除されたトピックに対して以前に生成されたページを削除**: DTIA マップの構造が変更された場合は、このオプションを使用して、削除されたトピックに対して以前に生成されたページを削除できます。 この機能は、完全なマップのパブリッシュでのみ使用できます。<br><br> トピック a.dita、b.dita、および c.dita を含む DITA マップをパブリッシュしたとします。 マップを再度公開する前に、マップから b.dita トピックを削除しました。 ここで、このオプションを選択した場合、b.dita に関連するすべてのコンテンツがAEM Sites出力から削除され、a.dita と c.dita のみが公開されます。<br><br>**注意**：削除されたページに関する情報も、出力生成ログに取り込まれます。 ログファイルへのアクセスについて詳しくは、[ ログファイルを表示して確認する ](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS) を参照してください。 <br><br>**注意**：トピックを削除すると、公開済みサイトからページが使用できなくなります。 したがって、トピックが削除される前に、警告が表示されます。 これらを削除するには、確認する必要があります。<br><br>- **このパスで他のソースによって作成されたすべてのページを削除する**：このオプションを選択すると、他のマップ、個々のトピック、またはその他のソースからこのパスで公開されたすべてのページが削除されます。 また、ページは、公開されたサイトからも使用できなくなります。 したがって、トピックが削除される前に、警告が表示されます。 これらを削除するには、確認する必要があります。 |
| 生成後のワークフロー | このオプションを選択すると、新しいポスト生成ワークフローのドロップダウンリストが表示され、AEMで設定されたすべてのワークフローが表示されます。 出力生成ワークフローの完了後に実行するワークフローを選択する必要があります。 |
| ベースラインの使用 | 選択した DITA マップにベースラインを作成した場合、このオプションを選択して、公開するバージョンを指定します。<br><br>**重要**:AEM サイトの増分出力を生成する場合、出力は、添付されたベースラインではなく、現在のバージョンのファイルを使用して作成されます。<br><br> 詳細については、「[ ベースラインの使用 ](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF) を参照してください。 |
| 条件付きフィルター | 次のいずれかのオプションを選択します。<br><br>**なし**：公開済みの出力に条件を適用しない場合は、このオプションを選択します。<br>**DITAVAL の使用**：条件付きコンテンツを生成する DITAVal ファイルを選択します。 参照ダイアログを使用するか、ファイルパスを入力して、複数の DITAVal ファイルを選択できます。 削除するには、ファイル名の近くにある十字のアイコンを使用します。 DITAVal ファイルは指定された順序で評価されるため、最初のファイルで指定された条件は、後のファイルで指定された一致条件よりも優先されます。 ファイルを追加または削除することで、ファイルの順序を維持できます。 DITAVal ファイルが他の場所に移動された場合や削除された場合は、マップ ダッシュボードから自動的には削除されません。 ファイルが移動または削除された場合は、場所を更新する必要があります。 ファイル名の上にマウスポインターを置くと、ファイルが格納されているAEM リポジトリ内のパスが表示されます。 DITAVal ファイルのみを選択できます。他のファイル タイプを選択すると、エラーが表示されます。<br>**条件プリセット**：出力の公開中に条件を適用する条件プリセットをドロップダウンから選択します。 このオプションは、DITA マップファイルに条件を追加した場合に表示されます。 条件付き設定は、DITA マップコンソールの「条件プリセット」タブで使用できます。 条件プリセットについて詳しくは、「[ 条件プリセットの使用 ](generate-output-use-condition-presets.md#id1825FL004PN)」を参照してください。 |
| 追加の DITA-OT コマンドライン引数 | 出力の生成時に DITA-OT で処理する追加の引数を指定します。 DITA-OT でサポートされるコマンドライン引数の詳細については、[DITA-OT documentation](https://www.dita-ot.org/) を参照してください。 |
| メタデータ <br> <br> ファイル（Assets）のプロパティ | メタデータとして処理するプロパティを選択します。 これらのプロパティは、DITA マップまたはブックマップファイルの「プロパティ」 ページから設定されます。 ドロップダウンリストから選択したプロパティが **ファイルプロパティ** フィールドの下に表示されます。 プロパティを削除するには、プロパティの横にある十字アイコンを選択します。 <br><br>**メモ**：メタデータプロパティでは大文字と小文字が区別されます。<br><br>*ベースラインを選択した場合、プロパティの値は選択したベースラインのバージョンに基づきます。<br>* ベースラインを選択していない場合、プロパティの値は最新バージョンに基づきます。<br><br>DITA-OT パブリッシングを使用して、出力にメタデータを渡すこともできます。 詳細ビューについては、[DITA-OT を使用してメタデータを出力に渡す ](pass-metadata-dita-ot.md#id21BJ00QD0XA) を参照してください。<br><br>**注意**: 「プロパティ」オプションで `cq:tags` を定義していない場合、公開用に「ベースライン」を選択していても、`cq:tags` の値は現在の作業コピーから取得されます。 |
| メタデータ <br> <br> フォールバックとしてのマップ プロパティの使用 | 選択すると、マップ ファイルに対して定義されたプロパティも、これらのプロパティが定義されていないトピックにコピーされます。 このオプションを使用する際は、次の点を考慮してください。<br><br>*文字列、日付、または長い（単一および複数値）プロパティのみをAEM サイト ページに渡すことができます。<br>* 文字列タイプのプロパティのメタデータ値は、特殊文字（`@, #, " "` など）をサポートしていません。<br>*このオプションは、`Properties` オプションと一緒に使用する必要があります。 |
| 一時ファイルを保持 | このオプションを選択すると、DITA-OT によって生成された一時ファイルが保持されます。 DITA-OT 経由で出力を生成するときにエラーが発生した場合は、このオプションを選択して一時ファイルを保持します。 その後、これらのファイルを使用して、出力生成エラーのトラブルシューティングを行うことができます。<br> <br> 出力を生成したら、「**一時ファイルをダウンロード**![ 一時ファイルをダウンロード」アイコン ](images/download-temp-files-icon.png) アイコンを選択して、一時ファイルを含む ZIP フォルダーをダウンロードします。<br><br> **メモ**：生成中にファイルプロパティが追加された場合、出力一時ファイルには、それらのプロパティを含む *metadata.xml* ファイルも含まれます。 |


### テンプレートを使用したAEM Sites出力の生成

Experience Manager Guidesでは、標準提供のテンプレートを使用したり、独自のAEM Sites テンプレートを追加したりできます。

AEM Sites プリセットを設定する前に、必ずテンプレートを使用してAEM Sites構造を作成してください。\
詳しくは、[AEM Sites テンプレートのダウンロードとインストール ](../install-guide/download-install-aem-sites-templates.md) を参照してください。



AEM Sites プリセットを作成して設定するには、次の手順を実行します。
1. 公開する DITA マップの「**出力プリセット**」タブを開きます。
1. **AEM Sites** 出力プリセットを選択します。
1. （オプション）「**レガシーコンポーネントマッピングを使用**」オプションをオフにして、レガシー以外のAEM Sites プリセットを作成します。
1. 「**追加**」をクリックします。AEM Sitesのプリセットが作成されます。
1. 標準の Sites テンプレートは、次の 2 つの方法で設定できます。
   1. **サイト** を選択し、入力されたオプションから公開パスとトピックページテンプレートを選択します。
      1. サイトを選択します。
      1. **サイト** を選択します。 例えば、`AEMG Docs` のように指定します。
      1. 「**Publishのパス**」オプションと **トピックページテンプレート** オプションがドロップダウンで自動的に設定されます。 オプションを選択することもできます。 例えば、`AEMG-Docs-Site/en/docs/product1` と `Topic page` がそれぞれ設定されています。
   1. サイトの完全なパスを選択します。
      1. 「**サイトパスを使用**」オプションを選択します。
      1. サイトの完全なパスを選択します。 例えば、`/content/AEMG-Docs-Site/en/docs/product1` のように指定します。
      1. 「トピックページテンプレート」が自動的に `Topic Page` に設定されます。


1. プリセットに加えた変更を保存します。
1. 「**生成**」オプションを選択します。
1. 対応するマップのAEM Sitesを生成します。 例えば、`/content/AEMG-Docs-Site/en/docs/product` のように指定します。


   >[!NOTE]
   >
   > 初めてAEM サイトにコンテンツを公開する場合は、サイトレベルでページを公開することをお勧めします。 これにより、CSS を中断することなく、出力が **Publish** インスタンスで正しく表示されます。



### Publishのリンクされたトピック

Experience Manager Guidesでは、`peer @scope` を使用してトピック参照を作成できるので、複雑なドキュメントを簡単に公開できます。 その後、AEM Sites プリセットからこれらの参照の公開コンテキストを定義し、最後にリンクされたトピックの出力を生成できます。
詳細については、「[ 他のマップからリンク トピックの出力を生成する ](../user-guide/generate-output-aem-site.md#generate-output-linking-topics-from-other-maps) を参照してください。




クロスリンクされたファイルの公開コンテキストを指定するには、次の手順を実行します。
1. 公開する DITA マップの「**出力プリセット**」タブを開きます。
1. **AEM Sites** 出力プリセットを選択します。

   「**一般**」、「**コンテンツ**」、「**トピックリスト**」および「**クロスマップ参照** の各タブを表示できます。 **クロスマップ参照** タブは、Experience Manager Guides（UUID）バージョンを使用する場合に表示されます。

   次の場合は、クロスマップリンクを表示できません。
   - 4.6 リリースより前に作成されたプリセット用。 「相互参照」 タブが無効になり、ツールヒント「マップを参照」 ダッシュボードが表示されます。
   - マップダッシュボードから作成されたプリセットの場合。 マップを参照ダッシュボードのツールチップが表示されます。
   - OOTB プリセットについては、マップ ダッシュボードのツールチップを参照してください。
   - グローバルプリセットの場合、このグローバルプリセットのローカルコピーを作成して、クロスマップ参照を設定します。
Web エディターでAEM Sites プリセットを使用する場合は、新しいプリセットを作成するか、既存のプリセットを複製します。

1. 「**クロスマップ参照**」タブを開きます。

   トピックとその参照のリストが表示されます。 `scope=”peer”` を使用して他の DITA マップで使用可能なトピックへのクロスマップ参照のリストの公開コンテキストを指定できます。

   Web エディターからクロスマップ参照パネルを使用するには、一意の ID`<xrefs>` 必要です。 `<xrefs>` の一意の ID は、その ID が存在しない場合、古いコンテンツの編集または保存時に自動的に生成されます。

   >[!NOTE]
   >
   >**クロスマップ参照** タブには、`scope=”peer”` を使用してのみリンクされたトピックが表示されます。 `scope=”local”` を含むリンクの場合は、公開コンテキストを指定する必要はありません。

   リンクされているすべてのトピックでは、最新の出力プリセットとマップがデフォルトで選択されています。 リンクされているすべてのトピックの公開コンテキストは、デフォルトで `<Most recently generated>` マップに設定されています。

   ![ クロスマップ参照 ](images/aem-sites-cross-map-references.png)

1. マップ内の各依存ファイルの最終公開出力を使用する場合は、[**生成された最新のコンテキストを使用**] を選択します。
リンクされたトピックを含むマップをパブリッシュする前に、親マップとして選択したマップをパブリッシュする必要があります。 リンクされたトピックを含むマップが公開されていない場合、AEM Sites出力ではハイパーリンクではなく通常のテキストとしてリンクが表示されます。
リンクされたトピックに対して、同じタイプのAEM Sites プリセットを選択する必要があります。 例えば、現在のAEM Sites プリセットで従来のコンポーネントマッピングを使用している場合は、リンクされているトピックの類似のAEM Sites プリセットを選択します。
1. [ 親マップ ] ドロップダウン リストで、現在のマップの出力にリンクする出力を持つマップ ファイルを選択します。
マップ ファイルを選択すると、[ 親マップ UUID] 列にマップの UUID が表示されます。 選択したマップに関連付けられている出力プリセットは、親マップのプリセット リストに表示されます。 例えば、マップ A のトピック 1 には、トピック 2 への参照が含まれています。 トピック 2 は、1 つまたは複数のマップに存在できます。 各リンクの親マップと、特定のプリセットまたは最近公開された出力を選択できます。

1. 同じトピックがファイル内で複数回参照される場合は、インスタンスごとに異なる公開コンテキストを追加できます。 これにより、コンテンツの柔軟性と制御が向上します。 たとえば、Topic 3 は Map B と Map C の両方に存在します。Topic 1 には、Topic 3 への 2 つの参照が含まれています。 最初のリンクの親マップとしてマップ B を選択し、2 番目のリンクの親としてマップ C を選択できます。

1. 親マップのプリセット ドロップダウンリストで、現在のマップの出力をリンクする出力プリセットを選択します。
   >[!NOTE]
   >
   > ドロップダウンリストには、現在のマップの様々なAEM Sites プリセットが表示されます。 プリセットを選択しないと、警告アイコンが表示され、出力の生成に失敗します。
1. すべてのソーストピックで必要なマップとその出力プリセットを選択して、「**生成**」を選択します。







**親トピック：**[ 出力プリセットについて ](generate-output-understand-presets.md)
