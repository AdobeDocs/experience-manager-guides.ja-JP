---
title: AEM サイト
description: AEM Guides でAEM サイトプリセットを作成し設定します。 AEM サイトサポートを使用して、記事ベースの出力、出力リンクトピック、conref の公開、コンテンツ内の文字列の検索を行います。
exl-id: 019d9fbf-2f23-4669-8022-d693be75c1c3
feature: Publishing
role: User
source-git-commit: b82f1f3b42f85cce8420d3962c69cd3bafc5728d
workflow-type: tm+mt
source-wordcount: '2621'
ht-degree: 0%

---

# AEM サイト {#id205BE3008SW}

AEM Site 出力には、次のオプションを使用できます。

AEM サイトプリセットは、次の 2 つの方法で作成できます。

**Web エディターから：** リポジトリパネルのマップビューで DITA マップファイルを開き、「出力」タブで「+」アイコンを選択して出力プリセットを作成します。次に、「プリセットを追加」ダイアログの「種類」ドロップダウンから「AEM Site」を選択します。 Web エディターでは、設定は「一般」タブと「詳細」タブに整理されています。

**一般**

この **一般** タブには、次の設定が含まれています。

- サイト名
- 出力パス
- 既存の出力ページ
- 孤立したサイト ページの削除
- \（条件がマップに対して定義されている場合\）を使用して条件を適用します
- ベースラインの使用\（マップのベースラインが作成された場合\）
- 生成後のワークフロー

**詳細**

「詳細」タブには、次の設定が含まれています。

- 一時ファイルのダウンロード
- トピックごとに個別のPDFを生成
- 既定としてマップ プロパティを使用

詳しくは、こちらを参照してください。 [AEM サイトの設定](#id231KIM004X1).

**マップダッシュボードから**

AEM Site の出力プリセットを開くには、Assets UI で DITA マップファイルをクリックし、「出力プリセット」をクリックして、「AEM Site 出力」オプションをクリックします。 **編集** 上部のをクリックして様々な設定を更新し、 **保存**.

>[!TIP]
>
> を参照してください。 *AEM サイト公開* AEM サイト出力の作成に関するベストプラクティスについては、ベストプラクティスガイドの節を参照してください。

## AEM サイトの設定 {#id_aem_site_config}

AEM Site 出力には、次のオプションを使用できます。

| AEM サイトのオプション | 説明 |
| --- | --- |
| 出力タイプ | 生成する出力のタイプ。 レスポンシブなAEM Site 出力を生成するには、「AEM Site」オプションを選択します。 |
| 設定名 | 作成するAEM サイト設定にわかりやすい名前を付けます。 例えば、次のように指定できます *社内ユーザー出力* または *エンドユーザー出力*. |
| サイト名 | 出力がAEM リポジトリに保存されるサイト名。<br><br>AEM リポジトリ内のノードは、ここで指定した名前で作成されます。 サイト名を指定しない場合は、DITA マップファイル名を使用してサイトノードが作成されます。<br><br>ここで指定するサイト名は、ブラウザータブのタイトルとしても使用されます。<br><br>サイト名を設定する際に変数を使用することもできます。 変数の使用について詳しくは、 [宛先パス、サイト名、ファイル名の各オプションを設定する変数を使用します](generate-output-use-variables.md#id18BUG70K05Z). |
| デザイン | 出力の生成に使用するデザインテンプレートを選択します。<br><br>カスタムデザインテンプレートを使用して出力を生成する方法について詳しくは、公開管理者にお問い合わせください。 |
| 宛先のパス | 出力が保存されるAEM リポジトリ内のパス。 最終出力の生成時に、サイト名と出力先パスが結合されます。 例えば、「サイト名」を `user-guide` 宛先パスを `/content/output/aem-guides`の場合、最終的な出力はの下に生成されます。 `/content/output/aem-guides/user-guide` ノード。<br><br>宛先パスの設定時に変数を使用することもできます。 変数の使用について詳しくは、 [宛先パス、サイト名、ファイル名の各オプションを設定する変数を使用します](generate-output-use-variables.md#id18BUG70K05Z). |
| 次を使用して条件を適用 | 次のいずれかのオプションを選択します。<br><br>**適用なし**：公開済みの出力に条件を適用しない場合は、このオプションを選択します。<br>**DITAVal ファイル**：条件付きコンテンツを生成する DITAVal ファイルを選択します。 参照ダイアログを使用するか、ファイルパスを入力して、複数の DITAVal ファイルを選択できます。 削除するには、ファイル名の近くにある十字のアイコンを使用します。 DITAVal ファイルは指定された順序で評価されるため、最初のファイルで指定された条件は、後のファイルで指定された一致条件よりも優先されます。 ファイルを追加または削除することで、ファイルの順序を維持できます。 DITAVal ファイルが他の場所に移動された場合や削除された場合は、マップ ダッシュボードから自動的には削除されません。 ファイルが移動または削除された場合は、場所を更新する必要があります。 ファイル名の上にマウスポインターを置くと、AEM リポジトリ内でファイルが格納されているパスが表示されます。 DITAVal ファイルのみを選択できます。他のファイル タイプを選択すると、エラーが表示されます。<br>**条件プリセット**：出力の公開中に条件を適用する条件プリセットをドロップダウンから選択します。 このオプションは、DITA マップファイルに条件を追加した場合に表示されます。 条件付き設定は、DITA マップコンソールの「条件プリセット」タブで使用できます。 条件プリセットについて詳しくは、を参照してください。 [条件プリセットの使用](generate-output-use-condition-presets.md#id1825FL004PN). |
| 既存の出力ページ | 「」を選択します **コンテンツを上書き** 既存のページのコンテンツを上書きするオプションです。 このオプションで上書きされるのは、ページのコンテンツノードとヘッドノードの下に存在するコンテンツのみです。 このオプションを使用すると、コンテンツを混在させて公開できます。 このオプションを選択すると、公開済み出力から孤立したページの削除を選択できます。 これも *default* AEM Site 出力を作成するためのオプション。<br><br>「」を選択します **削除と作成** 公開中に既存のページを強制的に削除するオプションです。 このオプションは、ページノードとそのコンテンツ、およびその下にあるすべての子ページを削除します。 出力プリセットのデザインテンプレートを変更した場合や、宛先に既に存在する追加のページを削除したい場合は、このオプションを使用します。 |
| 孤立したサイト ページの削除 | の選択 **コンテンツを上書き** が含まれる **既存の出力ページ** を設定すると、このオプションが表示されます。 このオプションを選択すると、すべての孤立ページが公開済みのAEM サイトから削除されます。 この機能を正常に実行するには、増分公開を使用せずに、DITA マップ全体を公開する必要があります。<br><br>トピック a.dita、b.dita、および c.dita を含む DITA マップをパブリッシュしたとします。 マップを再度公開する前に、マップから b.dita トピックを削除しました。 ここで、このオプションを選択した場合、b.dita に関連するすべてのコンテンツがAEM Site 出力から削除され、a.dita と c.dita のみが公開されます。<br><br>この機能では、パブリッシュされた子マップは削除されません。 たとえば、親マップに子マップが含まれ、子マップ全体を削除した場合、子マップのコンテンツはパブリッシュされた出力から削除されません。 ただし、子マップからトピックを削除して再公開すると、削除されたトピックのコンテンツはサイト出力から削除されます。<br><br>また、参照されているコンテンツがあり、そのコンテンツが再公開前に削除された場合、参照されているコンテンツのデータは削除されません。<br><br>**注意**：削除された孤立ページに関する情報も、出力生成ログに取り込まれます。 ログ ファイルへのアクセスの詳細については、を参照してください [ログファイルの表示と確認](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS). |
| 一時ファイルのダウンロード | このオプションを選択すると、DITA-OT で生成された一時ファイルがダウンロードされます。 DITA-OT が一時ファイルを格納する場所は、出力生成ログにあります。 DITA-OT 経由で出力を生成するときにエラーが発生した場合は、このオプションを選択して一時ファイルを保持します。 その後、これらのファイルを使用して、出力生成エラーのトラブルシューティングを行うことができます。<br> <br>  出力を生成したら、 **一時ファイルのダウンロード** ![「一時ファイルをダウンロード」アイコン](images/download-temp-files-icon.png) アイコンをクリックして、一時ファイルを含む ZIP フォルダーをダウンロードします。 <br><br> **注意**：一部のファイルプロパティを選択してから一時ファイルをダウンロードすると、の *metadata.xml* ファイルを ZIP フォルダーに格納します。 |
| トピックごとに個別のPDFを生成 | 選択すると、DITA マップ内のすべてのトピックに対してPDFも作成されます。 このオプションを選択すると、新しい「PDFパスを分割」オプションが表示されます。<br><br>分割PDFパス フィールドで、各トピックに対して生成されたPDFを保存するパスを指定します。<br><br>**注意**:AEM Guides は pdfx という名前の DITA-OT プラグインを使用して、各トピックのPDFを生成します。 このプラグインは、初期状態で出荷された DITA-OT パッケージにバンドルされています。 必要に応じて、このプラグインをカスタマイズしてPDFを生成できます。 カスタム DITA-OT プラグインを使用する場合は、必ず pdfx プラグインを組み込んで、トピックレベルのPDF生成機能を持たせてください。 |
| 生成後ワークフローを実行 | このオプションを選択すると、新しいポスト生成ワークフローのドロップダウンリストが表示され、AEMで設定されたすべてのワークフローが表示されます。 出力生成ワークフローの完了後に実行するワークフローを選択する必要があります。 |
| ベースラインの使用 | 選択した DITA マップにベースラインを作成した場合、このオプションを選択して、公開するバージョンを指定します。<br><br>**重要**:AEM サイトの増分出力を生成する場合、出力は、添付されたベースラインではなく、現在のバージョンのファイルを使用して作成されます。<br><br>参照： [ベースラインの操作](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF) を参照してください。 |
| ファイルのプロパティ | メタデータとして処理するプロパティを選択します。 これらのプロパティは、DITA マップまたはブックマップファイルの「プロパティ」 ページから設定されます。 ドロップダウンリストから選択したプロパティが「」の下に表示されます **ファイルのプロパティ** フィールド。 プロパティを削除するには、プロパティの横にある十字アイコンを選択します。 <br><br>**注意**：メタデータプロパティでは大文字と小文字が区別されます。<br><br>*ベースラインを選択した場合、プロパティの値は選択したベースラインのバージョンに基づきます。<br>* ベースラインを選択していない場合、プロパティの値は最新バージョンに基づきます。<br><br>DITA-OT パブリッシングを使用して、出力にメタデータを渡すこともできます。 詳しくは、 [DITA-OT を使用してメタデータを出力に渡す](pass-metadata-dita-ot.md#id21BJ00QD0XA).<br><br>**注意**：を定義していない場合 `cq:tags` 「プロパティ」オプションで、次の値を選択します `cq:tags` 公開用にベースラインを選択した場合でも、現在の作業コピーから選択されます。 |
| トピックにマップのプロパティがない場合は使用する | 選択すると、マップ ファイルに対して定義されたプロパティも、これらのプロパティが定義されていないトピックにコピーされます。 このオプションを使用する際は、次の点を考慮してください。<br><br>*AEM サイト ページに渡すことができるのは、String、Date、または Long （単一および複数値）のプロパティのみです。<br>* 文字列タイプのプロパティのメタデータ値では、特殊文字（など）はサポートされていません `@, #, " "`）に設定します。<br>*このオプションは、 `Properties` オプション。 |

## AEM サイトに関するその他の注意事項

### Web エディターから記事ベースの出力を生成

Web エディタから 1 つ以上のトピックまたは DITA マップ全体のAEM Site 出力を生成できます。 DITA マップの出力プリセットを作成する必要があります。その後、マップのAEM Site 出力を簡単に生成できます。 マップ内のいくつかのトピックを更新した場合は、それらのトピックに対するAEM サイト出力のみを Web エディタから生成することもできます。 詳しくは、 [Web エディターからの記事ベースの公開](web-editor-article-publishing.md#id218CK0U019I).

### 他のマップから出力リンク トピックを生成

複数のフォルダと DITA マップに文書のセットを広げることは、非常に一般的なシナリオです。 様々な場所からリンクされているコンテンツを公開することは、非常に複雑になります。 デフォルトでは、すべてのリンク `<xref>` は、 `local` `@scope`. このようなトピックを公開する場合は、トピックへの直接リンクが使用されるので、課題はありません。 トピックが現在の DITA マップの外部にある場合、リンクはリンクされたコンテンツを表示しません。

コンテンツをリンクするもう 1 つの方法は、 `peer` `@scope`. このようなコンテンツの場合、リンクは実行時に DITA マップの公開コンテキストからファイルのタイトルとリンクトピックの設定済みコンテキストを選択して解決されます。 次のスクリーンショットは、を持つリンクのプロパティパネルを示しています。 `peer` `@scope`:

![](images/peer-link-scope-link.png){width="800" align="left"}

他のマップ内の他のトピックにリンクする複雑なマップやトピックの公開を簡単にするために、AEM ガイドでは、各出力プリセットの公開コンテキストを設定できます。

公開コンテキストを使用すると、特定の出力を公開するマップから使用する必要があるトピックを指定できます。 例を利用してこれを理解しましょう。例えば、4 つのフォルダー（サンプル a、サンプル b、サンプル c、サンプル d）があるとします。各フォルダには DITA マップ （DITA マップ A、DITA マップ B、DITA マップ C、および DITA マップ D）が含まれています。クロスマップリンクは、DITA マップ A のトピックが DITA マップ B、C、または D のトピックにリンクするときに発生します。次のスクリーンショットでは、サンプルの概念トピックに、他の DITA マップの一部であるファイルへのリンク \（または参照\）が含まれています。

![](images/sample-concept-link-to-other.png){width="350" align="left"}

これで、このトピックを含むマップ ファイルのAEM サイト公開設定を指定する際に、リンクされたコンテンツの公開コンテキストを公開時に使用するコンテキストを選択できます。 公開コンテキストは、DITA マップとその出力プリセットの組み合わせです。 出力プリセットには、コンテンツの特定のバージョンと条件付きプリセットが含まれます。 この DITA マップ、出力プリセット、\（files\） バージョン、および条件の組み合わせによって、リンクされたマップの公開コンテキストが定義されます。

クロスリンクされたファイルの公開コンテキストを指定するには、次の手順を実行します。

1. を開きます **出力プリセット** 公開する DITA マップのタブ。

1. 「」を選択します **AEM サイト** 出力プリセット。

   「AEM プリセット設定」タブと「公開コンテキスト」タブが表示されます。

   ![](images/aem-site-publish-settings.png){width="800" align="left"}

1. を開きます **公開コンテキスト** タブ。

   依存トピックのリストが表示されます。 これらのトピックは、現在のマップの一部のトピックからリンクされていますが、他の DITA マップでも使用できます。

   >[!NOTE]
   >
   > 「公開コンテキスト」タブには、を使用してリンクされているトピックが表示されます `peer` `@scope` のみ。 とのリンク用 `local` `@scope`を選択する必要があります。公開コンテキストを指定する必要はありません。

   デフォルトでは、リンクされているすべてのトピックで、最新の出力プリセットおよびマップが選択されます。

   ![](images/default-publish-context.png){width="800" align="left"}

1. DITA マップとプリセットのデフォルト選択を変更するには、をクリックします。 **編集** \（メインツールバーの\）

1. マップ内の各依存ファイルの最新のパブリッシュされた出力を使用する場合は、を選択します **最近生成された公開コンテキストをすべての依存トピックに使用**.

1. が含まれる **親マップ** ドロップダウン リストから、現在のマップの出力にリンクする出力を持つマップ ファイルを選択します。

   マップ ファイルを選択すると、マップの UUID が [ 親マップ UUID] 列に表示されます。 選択したマップに関連付けられている出力プリセットが、親マップのプリセット リストに表示されます。

1. が含まれる **親マップのプリセット** ドロップダウンリストで、現在のマップの出力をリンクする出力プリセットを選択します。

1. 必要なマップとその出力プリセットをすべての依存トピックに対して選択し、をクリックします **完了**.

   これで、依存トピックのコンテキストが設定されました。 現在のマップの出力を生成できます。 出力の生成について詳しくは、を参照してください。 [マップコンソールから DITA マップの出力を生成](generate-output-for-a-dita-map.md#).

### 混合型公開

AEM Guides は、既存のAEM サイト内での DITA コンテンツの公開をサポートしています。 例えば、既存のサイトがある場合、AEM Site 出力を使用して、そのサイトの DITA コンテンツのみを公開できます。 このプロセスでは、既存の非 DITA コンテンツはパブリッシュプロセスによって変更されません。 DITA コンテンツのみを公開するためのサイトの設定については、公開管理者に問い合わせてください。

### 公開 `conref`

を使用している場合 `conref` コンテンツでは、ソース \（または参照\） トピックのコンテンツと共に、通常のコンテンツまたは埋め込みコンテンツとして公開されます。 この `conref` コンテンツはメインコンテンツと共にレンダリングされ、同じものについては別個のサイトページは作成されません。 で参照されているコンテンツを検索する場合 `conref`を含むメイントピックまたはページのみ `conref` 検索結果には内容が表示されます。

>[!NOTE]
>
>用に別個のページを生成した場合 `conref` AEM Guides バージョン 3.5 以前を使用しているコンテンツでは、を使用して、これらのページをクリーンアップまたは削除することをお勧めします [孤立したサイト ページの削除](#delete-orphan-page-aem-site) オプション。


### コンテンツ内の文字列の検索

AEM Site 出力で文字列を検索できます。 デフォルトでは、タイトルのみで文字列を検索できます。 AEM サイト出力の内容または本文で文字列を検索するには、システム管理者に連絡して、flattening.enabled プロパティを有効にします。

![AEM サイトを検索出力](images/aem-output-search.png){width="650" align="left"}

詳しくは、次を参照してください *AEM Site のノード構造のフラット化の設定* Adobe Experience Manager ガイドのインストールと設定に関する節を参照してください。

**親トピック：**[&#x200B;出力プリセットについて](generate-output-understand-presets.md)
